# E-Market-Project
Database architecture for e-market

![Снимок](https://user-images.githubusercontent.com/55914169/147758816-6b057bae-dd9a-49a1-aeb3-c200c4f97edb.JPG)

Бизнес-задачи, которые может решать данная модель БД.
1. Определение поставщиков, пользующихся наибольшей популярностью у покупателей
2. Сбор статистики динамики покупок в зависимости от изменения цен и предложений определенных поставщиков
3. Сбор статистики по гендерно-возрастной аудитории для каждой категории товаров
   а также их ценового диапазона
4. Сбор данных статистики по местам заказов и проведение анализа логистики доставки

Создание кластера PostgreSQL в докере на Ubuntu 18.04, запуск сервер и подключение клиента
![дз1](https://user-images.githubusercontent.com/55914169/146678007-2b4ac863-ffee-4059-bcc2-a4d9e1c12c83.JPG)
![дз2](https://user-images.githubusercontent.com/55914169/146678201-d2cadcce-9d64-45d4-ad69-f430dad4d1c8.JPG)

1. Анализ возможных запросов\отчетов\поиска данных.

    Возможные варианты запросов\поиска данных
1). Запрос цены продукта по его названию
    - Индекс: IX_NAME ( name ) - простой
    данный индекс по полю name, т.к. поиск производится именно по данному полю,
    плюс индекс может быть полезен, если необходимо отобразить список продуктов в 
    алфавитном порядке

2). Запрос на список заказов по данному покупателю
    - Индекс: IX_CUSTOMER ( customer_id ) - простой
    данный индекс по полю customer_id, т.к. поиск производится именно по данному полю

3). Запрос на список продуктов по данному поставщику
    - Индекс: IX_NAME_SUPPLIER ( name, supplier_id ) - композитный
    данный индекс по полям name и supplier_id, т.к. возможен поиск с доп условиями 
    (название продукта и id поставщика), т.к. наименований продуктов гораздо больше, чем поставщиков,
    составной осущетсвляет сортировку сначала по полю name, плюс это дает возможности
    для более быстрого запроса на отображение продуктов конкретного поставщика в алфавитном порядке

4.) Запрос на список названий продуктов для определенных ценовых диапазонов
    - Индекс: IX_PRICE_NAME ( price, name )- композитный
    данный индекс по полям price и name, т.к. возможен поиск с доп условиями 
    (название(как полнотекстовое так и нет) продукта и цена в определенных диапазонах),
    составной осущетсвляет сортировку сначала по полю name, плюс это дает возможности
    для более быстрого запроса на отображение продуктов в конкретных ценовых диапазонах в алфавитном порядке

    Возможные варианты отчетов
1). Отчет о количестве заказов по разным возрастным категориям
    - Индекс: IX_AGE ( age ) - простой
    сортировка по возрастам для более быстрого представления диапазонов

2). Отчет о количестве заказов по каждому поставщику
    // TODO: индекс избыточен из-за небольшого (<100) количества поставщиков ?

3). Отчет о vip покупателях ( количество заказов > 100 )
    - Индекс: IX_CUSTOMER ( customer_id ) - простой
    сортировка по id покупателя для более быстрого поиска
   
2. Возможная кардиальность поля

- customer_id, order_id, supplier_id, category_id - сильная ОГРАНИЧЕНИЯ: UNIQUE 
- first_name - средняя/слабая кардинальность ОГРАНИЧЕНИЯ: NOT NULL (необходимо для создания личного кабинета покупателя)
- last_name - слабая кардинальность ОГРАНИЧЕНИЯ: NOT NULL (необходимо для создания личного кабинета покупателя)
- e_mail - сильная ОГРАНИЧЕНИЯ: NOT NULL (необходимо для создания личного кабинета покупателя)
- sex - слабая ОГРАНИЧЕНИЯ: ( sex >= 0 AND sex <= 1) , т.к. тип данных для поля sex - int
- address - сильная
- date_time - сильная ( т.к. используется timestamp )
- price - средняя ОГРАНИЧЕНИЯ: CHECK (price > 0)
- name ( для продукта ) - средняя ОГРАНИЧЕНИЯ: NOT NULL
- description ( для продукта ) - средняя/сильная

